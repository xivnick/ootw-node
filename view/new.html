<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta property="og:type" content="website" />
  <meta property="og:title" content="OOTW - Outfit of the Weather" />
  <meta property="og:description" content="ì™¸íˆ¬ë¥¼ êº¼ë‚´ì•¼ í• ì§€ ë§ì„¤ì—¬ì§ˆ ë•Œ, ë¹„ìŠ·í•œ ë‚ ì”¨ì— ì…ì—ˆë˜ OOTDë¥¼ í™•ì¸í•´ë³´ì„¸ìš”." />
  <meta property="og:image" content="https://is-it-cold-app.netlify.app/img/og.png" />
  <meta property="og:url" content="https://is-it-cold-app.netlify.app" />

  <title>OOTW - Outfit of the Weather</title>
  <!-- Pretendard í°íŠ¸ ë¡œë“œ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css" />
  <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Chart.js & DataLabels Plugin -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <style>
    @font-face {
      font-family: 'BMDOHYEON';
      src: url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_one@1.0/BMDOHYEON.woff') format('woff');
      font-weight: normal;
      font-style: normal;
    }
    :root {
      --color-primary: #5DADE2;
      --color-secondary: #2E86C1;
      --color-bg-light: #EAF6FF;
      --color-bg-dark: #D0E7FC;
      --color-accent: #F7DC6F;
      --color-text: #1B2631;
      --overlay-dark: rgba(0,0,0,0.3);
      --spacing: 1rem;
      --radius: 0.75rem;
    }
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Pretendard', sans-serif;
      background: var(--color-bg-light);
      color: var(--color-text);
      line-height: 1.6;
    }
    .logo, h1, h2 { font-family: 'BMDOHYEON', sans-serif; }
    /* ë°°ê²½ ë° í—¤ë” */
    .bg-fixed { position: fixed; inset: 0; background: url('img/cloudy-sky.jpg') center/cover no-repeat; z-index: -1; }
    .header-bg { position: absolute; top: 0; left: 0; right: 0; height: 60px; background: #fff; z-index: 9; }
    header {
      position: sticky; top: 0;
      background: rgba(255,255,255,0.8);
      display: flex; justify-content: space-between; align-items: center;
      height: 60px; padding: 0 2rem; z-index: 10;
    }
    .logo { line-height: 60px; font-size: 1.5rem; font-weight: bold; color: var(--color-secondary); margin-top: 5px }
    .btn-reserve {
      background: #fff; color: var(--color-text);
      font-size: 1rem; padding: 0.75rem 1.25rem; border-radius: 4px; border: none;
      cursor: pointer; transition: background .2s, box-shadow .2s;
    }
    .btn-reserve:hover { background: var(--color-primary); color: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }

    main { position: relative; z-index: 1;}
    section { padding: 4rem 2rem; }
    section:nth-child(even) { background: var(--color-bg-dark); }
    section h2 { font-size: 1.85rem; margin-bottom: 1.5rem; text-align: center; }

    /* Hero */
    .hero { height: 50vh; min-height: 300px; display: flex; flex-direction: column; justify-content: center; align-items: flex-start; padding: 0 2rem; }
    .hero-content h1 { font-size: 2rem; color: #fff; margin-bottom: 1rem; text-shadow: 0 .2rem .4rem rgba(0,0,0,0.2); }
    .hero-content p { font-size: 1.25rem; color: #f0f0f0; margin-bottom: 2rem; text-shadow: 0 1px 3px rgba(0,0,0,0.6); }

    /* Service Preview */
    .service-preview h2 { color: var(--color-text); }
    .weather-card { max-width: 280px; margin: 0 auto 2rem; text-align: center; }
    .weather-card .weather-label { display: inline-block; padding: 0.25rem 0.75rem; background: #666; border-radius: 999px; font-size: 0.7rem; color: #FFF; margin-bottom: 0.5rem; }
    .weather-card .weather-main { display: flex; align-items: center; justify-content: center; gap: 0.5rem; margin-bottom: 0.5rem; line-height: 1.2; }
    .weather-card .weather-icon { font-size: 2rem; }
    .weather-card .weather-temp-large { font-size: 3rem; font-weight: bold; line-height: 1; }
    .weather-card .weather-compare { font-size: 0.9rem; color: #333; margin-bottom: 0.5rem; }
    .weather-card .weather-minmax { font-size: 0.875rem; color: #555; margin-bottom: 0.5rem; }
    .weather-card .weather-note { font-size: 0.6rem; color: #555; }

    .service-preview h3 { text-align: center; margin-bottom: 1rem; font-size: 1.25rem; }
    .carousel-wrapper { display: flex; justify-content: center; max-width: 1000px; margin: 0 auto; overflow: hidden; }
    .carousel { display: flex; width: fit-content; max-width: 100%; overflow-x: auto; -webkit-overflow-scrolling: touch; gap: 1rem; }
    .carousel-card { position: relative; flex: 0 0 auto; width: 40vw; max-width: 240px; aspect-ratio: 9/16; border-radius: 8px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.15); background: #fff; }
    .carousel-card img { width: 100%; height: 100%; object-fit: cover; }
    .card-label { position: absolute; top: 0.5rem; left: 0.5rem; background: rgba(0,0,0,0.6); color: #fff; padding: 0.25rem 0.75rem; border-radius: 999px; font-size: 0.75rem; white-space: nowrap; }
    .card-date { position: absolute; bottom: 0.5rem; left: 0.5rem; font-weight: bold; color: #fff; font-size: 0.75rem; line-height: 1; white-space: nowrap; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
    .ai-note { text-align: center; font-size: 0.75rem; color: #555; margin-top: 1rem; }

    /* Features & Benefits */
    .features-benefits { padding: 4rem 2rem; }
    .benefits-grid { display: grid; gap: 2rem; grid-template-columns: repeat(auto-fit, minmax(240px, 1fr)); }
    /* ê¸°ë³¸ì ìœ¼ë¡œ 5ë²ˆì§¸, 6ë²ˆì§¸ ì¹´ë“œëŠ” ìˆ¨ê¹€ */
    .benefits-grid > .benefit-card:nth-child(n+5) { display: none; }
    .benefit-card { background: rgba(255,255,255,0.3); backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); border-radius: 12px; padding: 2rem; text-align: center; }
    .benefit-card .icon { font-size: 2.5rem; margin-bottom: 1rem; }
    .benefit-card h3 { font-size: 1.25rem; margin-bottom: 0.5rem; }
    .benefit-card p { font-size: 1rem; color: #333; }
    /* ì„¸ ì¹¸ ì´ìƒì¼ ë•Œ 5ë²ˆì§¸,6ë²ˆì§¸ ì¹´ë“œ í‘œì‹œ */
    @media (min-width: 848px) {
      .benefits-grid > .benefit-card:nth-child(n+5) { display: block; }
    }
    .benefit-card .icon { font-size: 2.5rem; margin-bottom: 1rem; }
    .benefit-card h3 { font-size: 1.25rem; margin-bottom: 0.5rem; }
    .benefit-card p { font-size: 1rem; color: #333; }

    /* Reserve Form */
    #reserve-form {
      background: linear-gradient(90deg, var(--color-primary), var(--color-accent));
      padding: 4rem 2rem;
      border-radius: 0;
    }
    #reserve-form h2 {
      color: #fff;
      margin-bottom: 1.5rem;
    }
    #reserve-form h2 { color: #fff; }
    .form-group {
      max-width: 500px;
      margin: 0 auto 1.5rem;
    }
    .form-group label {
      display: block;
      font-size: 1rem;
      font-weight: 600;
      color: #fff;
      margin-bottom: 0.5rem;
    }
    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 1rem;
      border: none;
      border-radius: 6px;
      font-size: 1rem;
      resize: none;
    }
    .btn-submit {
      background: #fff;
      color: var(--color-secondary);
      font-size: 1rem;
      padding: 0 2rem;
      border: none;
      cursor: pointer;
      transition: background .2s;
      display: block;
      margin: 0 auto 1rem;
      border-radius: 6px;
      height: 45px;
      line-height: 45px;
    }
    /* ëª¨ë°”ì¼ì—ì„œ ê¸°ë³¸ ë°°ê²½ì„ primary colorë¡œ ë³€ê²½ */
    @media (max-width: 768px) {
      .btn-submit {
        background: var(--color-secondary);
        color: #fff;
      }
    }
    .btn-submit:hover { background: var(--color-secondary); color: #fff; box-shadow: 0 4px 12px rgba(0,0,0,0.2);}
    .benefits p { color: #fff; text-align: center; margin-bottom: .5rem; }

    /* FAQ ê¸€ë˜ìŠ¤ëª¨í”¼ì¦˜ ìŠ¤íƒ€ì¼ */
    .faq {
      padding: 4rem 2rem;
/*      background: var(--color-bg-dark);*/
    }

    .faq h2 {
      font-size: 1.85rem;
      margin-bottom: 2rem;
      text-align: center;
      color: var(--color-text);
    }

    .faq-item {
      background: rgba(255,255,255,0.3);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 1rem 1.5rem;
      margin-bottom: 1rem;
      border: 1px solid rgba(255,255,255,0.4);
    }

    .faq-question {
      width: 100%;
      background: none;
      border: none;
      font-size: 1rem;
/*      font-weight: bold;*/
      color: var(--color-text);
      text-align: left;
      cursor: pointer;
      position: relative;
      padding-right: 1.5rem;
      margin-top: .2rem;
    }

    .faq-question::after {
      content: 'â–¼';
      position: absolute;
      right: 0;
      top: 50%;
      transform: translateY(-50%);
      transition: transform .3s;
      color: #fff;
    }

    .faq-item.open .faq-question::after {
      transform: translateY(-50%) rotate(180deg);
    }

    .faq-answer {
      display: none;
      margin-top: 0.5rem;
      color: var(--color-text);
      font-size: .9rem;
      line-height: 1.4;
      margin-top: .5rem;
    }

    footer { background: rgba(255,255,255,0.8); backdrop-filter: blur(4px); -webkit-backdrop-filter: blur(4px); padding: 2rem; text-align: center; font-size: .875rem; }
    footer p { line-height: 1.6; margin-bottom: .2rem }
    footer a { color: var(--color-primary); }

    /* Privacy Modal */
    .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 20; }
    .modal-content { background: #fff; width: 90%; max-width: 600px; padding: 2.5rem; border-radius: 8px; position: relative; box-shadow: 0 8px 24px rgba(0,0,0,0.2); }
    .modal-content h2 { margin-bottom: 1rem; font-size: 1.5rem; color: var(--color-text); }
    .policy-body { max-height: 60vh; overflow-y: auto; font-size: 0.95rem; line-height: 1.6; padding-right: 1rem; }
    .policy-body p { margin-bottom: 1rem; }
    .close-btn { position: absolute; top: 1rem; right: 1rem; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: var(--color-text); }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Preview App */
    #preview-app .controls { display:flex; gap:var(--spacing); justify-content:center; flex-wrap:wrap; margin-bottom:var(--spacing); }
    #preview-app .controls input { flex:1; padding:0.75rem 1.25rem;border:1px solid #ccc; border-radius: 4px; 
      font-size: 1rem; }
    #preview-app .controls button { padding:0.75rem 1.25rem; border:none; border-radius:4px; cursor:pointer; transition:background .2s; background:var(--color-primary); color:#fff; 
      font-size: 1rem; }
    #preview-app .controls button:hover { background:#fff; color:var(--color-text); box-shadow:0 4px 12px rgba(0,0,0,0.2);
      font-size: 1rem;  }
    #preview-app #search-results { list-style:none; max-height:200px; overflow-y:auto; margin-bottom:var(--spacing); border:1px solid #eee; border-radius:var(--radius); }
    #preview-app #search-results li { padding:0.75rem 1rem; cursor:pointer; }
    #preview-app #search-results li:hover { background:#f1f1f1; }
    #preview-app #location-name { font-size:1.25rem; font-weight:bold; text-align:center; margin-bottom:var(--spacing); }
    #preview-app .weather-card { max-width:280px; margin:0 auto; text-align:center; margin-bottom:var(--spacing); }
    /* Style Options */
    #preview-app #style-options { display:flex; justify-content:center; gap:var(--spacing); margin-bottom:var(--spacing); }
    #preview-app #style-options label { display:flex; align-items:center; gap:0.25rem; cursor:pointer; }
    #preview-app #outfit { background:var(--color-bg-light); border-radius:var(--radius); padding:var(--spacing); text-align:center; font-size:1rem; margin-bottom:var(--spacing); }
    #preview-app #chart-container { background:#fff; border-radius:var(--radius); padding:var(--spacing); }
    #preview-app canvas { width:100% !important; height:14rem !important; }
  </style>
</head>
<body>
  <div class="bg-fixed"></div>
  <div class="header-bg"></div>
  <header>
    <span class="logo">OOTW</span>
    <button class="btn-reserve" id="btn-reserve">ì‚¬ì „ì˜ˆì•½</button>
  </header>
  <main>
    <!-- Hero -->
    <section class="hero">
      <div class="hero-content container">
        <h1>OOTW - Outfit of the Weather</h1>
        <p>ë°”ìœ ì•„ì¹¨ ì˜·ì°¨ë¦¼ì´ ê³ ë¯¼ë  ë•Œ, ë¹„ìŠ·í•œ ë‚ ì”¨ì— ì…ì—ˆë˜ OOTDë¥¼ í™•ì¸í•´ë³´ì„¸ìš”.</p>
        <button class="btn-reserve" id="hero-reserve">ì§€ê¸ˆ ì‹ ì²­í•˜ê¸°</button>
      </div>
    </section>

    <!-- Service Preview -->
    <<section id="preview-app" class="service-preview container">
      <h2>Service Preview</h2>
      <div class="controls">
        <button @click="getLocation">ğŸ“ í˜„ì¬ ìœ„ì¹˜</button>
        <input v-model="query" @keyup.enter="searchRegions" placeholder="ì§€ì—­ ê²€ìƒ‰" />
        <button @click="searchRegions">ğŸ” ê²€ìƒ‰</button>
      </div>
      <ul id="search-results" v-if="regions.length">
        <li v-for="region in regions" :key="region.name" @click="selectRegion(region)">{{ region.name }}</li>
      </ul>
      <div class="weather-card" v-if="weather">
        <div class="weather-label">{{ locationName }}</div>
        <div class="weather-main">
          <div class="weather-icon">{{ weather.icon }}</div>
          <div class="weather-temp-large">{{ weather.temp }}Â°</div>
        </div>
        <!-- <div class="weather-compare">{{ weather.compare }}</div> -->
        <div class="weather-minmax">{{ weather.summary }}</div>
      </div>
      <div id="style-options" v-if="weather">
        <label v-for="opt in styleOptions" :key="opt.value">
          <input type="radio" name="style" :value="opt.value" v-model="selectedStyle"> {{ opt.label }}
        </label>
      </div>
      <div id="outfit" v-if="outfit">{{ outfit }}</div>
      <div id="chart-container" v-if="chartData">
        <canvas id="weather-chart"></canvas>
      </div>
    </section>

    <!-- Why Youâ€™ll Love Is It Cold? -->
    <section class="features-benefits container">
      <h2>Key Benefits</h2>
      <div class="benefits-grid">
        <div class="benefit-card">
          <div class="icon">ğŸŒ¡ï¸</div>
          <h3>ì˜¨ë„ì— ë§ëŠ” ì˜·ì°¨ë¦¼ ì¶”ì²œ</h3>
          <p>ë‚ ì”¨ì™€ ì˜¨ë„ì— ë§ëŠ” ì˜·ì°¨ë¦¼ì„ ì¶”ì²œí•´ ë“œë¦½ë‹ˆë‹¤.</p>
        </div>
        <div class="benefit-card">
          <div class="icon">ğŸ‘—</div>
          <h3>ìŠ¤íƒ€ì¼ ê°œì¸í™” ì¶”ì²œ</h3>
          <p>ë‚´ ì„ í˜¸ ìŠ¤íƒ€ì¼ì„ ë°˜ì˜í•´ ìµœì ì˜ ì½”ë””ë¥¼ ì œì•ˆí•©ë‹ˆë‹¤.</p>
        </div>
        <div class="benefit-card">
          <div class="icon">ğŸ“…</div>
          <h3>ê³¼ê±° OOTD ê¸°ë¡ í™œìš©</h3>
          <p>ë¹„ìŠ·í•œ ë‚ ì”¨ì— ì…ì—ˆë˜ ë‚´ ì½”ë””ë¥¼ ë‹¤ì‹œ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
        <div class="benefit-card">
          <div class="icon">ğŸ”„</div>
          <h3>ì¼ì¼ í”¼ë“œë°± ë£¨í”„</h3>
          <p>ë§¤ì¼ ë§Œì¡±ë„ë¥¼ ê¸°ë¡í•˜ì—¬ ì¶”ì²œ ì •í™•ë„ê°€ ë†’ì•„ì§‘ë‹ˆë‹¤.</p>
        </div>
        <div class="benefit-card">
          <div class="icon">â˜”</div>
          <h3>ë¹„ ì˜¤ëŠ” ë‚  ìš°ì‚° ì•Œë¦¼</h3>
          <p>ë¹„ê°€ ì˜¬ ë•Œ ì™¸ì¶œ ì „ ìš°ì‚°ì„ ì±™ê¸¸ ìˆ˜ ìˆë„ë¡ ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.</p>
        </div>
        <div class="benefit-card">
          <div class="icon">ğŸ”œ</div>
          <h3>ì¶”ê°€ ì˜ˆì • ê¸°ëŠ¥</h3>
          <p>í–¥í›„ ë” ë§ì€ ê¸°ëŠ¥ì´ ì—…ë°ì´íŠ¸ë  ì˜ˆì •ì´ë‹ˆ ê¸°ëŒ€í•´ ì£¼ì„¸ìš”.</p>
        </div>
      </div>
    </section>

    <!-- Reserve Form -->
    <section id="reserve-form" class="container">
      <h2>ì‚¬ì „ì˜ˆì•½ ì‹ ì²­</h2>
      <div class="form-group">
        <label for="email">ì´ë©”ì¼</label>
        <input type="email" id="email" placeholder="your.email@example.com" required>
      </div>
      <div class="form-group">
        <label for="advice">ì¡°ì–¸ / ì‘ì›</label>
        <textarea id="advice" placeholder="ì˜·ì°¨ë¦¼ì— ëŒ€í•œ ê³ ë¯¼ì´ë‚˜ ì„œë¹„ìŠ¤ì— ëŒ€í•œ ê¸°ëŒ€ë¥¼ ììœ ë¡­ê²Œ ì ì–´ì£¼ì„¸ìš”" rows="4"></textarea>
      </div>
      <button class="btn-submit" id="submit-btn">ë² íƒ€ ì•¡ì„¸ìŠ¤ ì‹ ì²­í•˜ê¸°</button>
      <div class="benefits">
        <p>âœ” í´ë¡œì¦ˆ ë² íƒ€ ì–¼ë¦¬ ì•¡ì„¸ìŠ¤ ì œê³µ</p>
        <p>âœ” ê°œë°œ ì—…ë°ì´íŠ¸ ë©”ì¼ë§</p>
      </div>
    </section>

    <!-- FAQ Section -->
    <section class="faq container">
      <h2>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸</h2>

      <div class="faq-item">
        <button class="faq-question">Q. ì–´ë–¤ OOTDë¥¼ ë³¼ ìˆ˜ ìˆë‚˜ìš”?</button>
        <div class="faq-answer">
          ë¹„ìŠ·í•œ ë‚ ì”¨ì— ìì‹ ì´ ê¸°ë¡í•œ ì½”ë”” ì‚¬ì§„ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">Q. OOTDë¥¼ ì—…ë¡œë“œí•˜ì§€ ì•Šìœ¼ë©´ ì‚¬ìš©í•  ìˆ˜ ì—†ë‚˜ìš”?</button>
        <div class="faq-answer">
          ê°„ë‹¨í•œ ì˜·ì°¨ë¦¼ í‚¤ì›Œë“œë“¤ë§Œ ì„ íƒí•´ë„ ë‚ ì”¨ë³„ ì˜·ì°¨ë¦¼ ì¶”ì²œì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </div>
      </div>


      <div class="faq-item">
        <button class="faq-question">Q. ë‹¤ë¥¸ ì‚¬ëŒì˜ OOTDë„ ë³¼ ìˆ˜ ìˆë‚˜ìš”?</button>
        <div class="faq-answer">
          í˜„ì¬ëŠ” ì§€ì›í•˜ì§€ ì•Šì§€ë§Œ ì¶”í›„ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ ì¶”ê°€ë¥¼ ê³ ë ¤ì¤‘ì…ë‹ˆë‹¤.
        </div>
      </div>

      <div class="faq-item">
        <button class="faq-question">Q. ì˜¤ëŠ˜ ì¶¥ë‚˜ìš”?</button>
        <div class="faq-answer">
          ì„œìš¸ ê¸°ì¤€ìœ¼ë¡œ ìš”ì¦˜ì€ ë”ìš´ ê²ƒ ê°™ìŠµë‹ˆë‹¤.
        </div>
      </div>

    </section>
  </main>
  <!-- Privacy Modal -->
  <div id="policy-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn">&times;</button>
      <h2>ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</h2>
      <div class="policy-body">
        <p><strong>ìˆ˜ì§‘ í•­ëª©:</strong> ì´ë©”ì¼</p>
        <p><strong>ì´ìš© ëª©ì :</strong> ì‚¬ì „ì˜ˆì•½ ì•ˆë‚´ ë° ê°œë°œ ì—…ë°ì´íŠ¸ ë°œì†¡</p>
        <p><strong>ë³´ê´€ ê¸°ê°„:</strong> ê°œë°œ ì™„ë£Œ ë˜ëŠ” ê°œë°œ ì¤‘ë‹¨ ì‹œê¹Œì§€, ìµœì¥ 1ë…„</p>
        <p><strong>ì‚­ì œ ìš”ì²­:</strong> ë©”ì¼ ìš”ì²­ ì‹œ ì¦‰ì‹œ ì‚­ì œ ì²˜ë¦¬</p>
        <p><strong>ì´ìš©ì ê¶Œë¦¬:</strong> ì—´ëŒ, ì •ì •, ì‚­ì œ ë¬¸ì˜: xivnick@gmail.com</p>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer>
    <p>ë¬¸ì˜: xivnick@gmail.com</p>
    <p><a href="#" id="policy-link">ê°œì¸ì •ë³´ ì²˜ë¦¬ë°©ì¹¨</a></p>
  </footer>
  <div id="loading-overlay" style="
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.3);
    justify-content: center;
    align-items: center;
    z-index: 9999;
  ">
    <div style="
      width: 50px; height: 50px;
      border: 5px solid #fff;
      border-top-color: var(--color-primary);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    "></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script>
    // Scroll to form
    document.getElementById('btn-reserve').addEventListener('click', () => document.getElementById('reserve-form').scrollIntoView({ behavior: 'smooth' }));
    document.getElementById('hero-reserve').addEventListener('click', () => document.getElementById('reserve-form').scrollIntoView({ behavior: 'smooth' }));
    // Privacy modal
    const policyLink = document.getElementById('policy-link');
    const policyModal = document.getElementById('policy-modal');
    const closeBtn = policyModal.querySelector('.close-btn');
    policyLink.addEventListener('click', e => { e.preventDefault(); policyModal.style.display = 'flex'; });
    closeBtn.addEventListener('click', () => policyModal.style.display = 'none');
    window.addEventListener('click', e => { if (e.target === policyModal) policyModal.style.display = 'none'; });
  </script>
  <script>
    document.querySelectorAll('.faq-question').forEach(q => {
      q.addEventListener('click', () => {
        const ans = q.nextElementSibling;
        ans.style.display = (ans.style.display === 'block') ? 'none' : 'block';
      });
    });
  </script>
  <script>
    let ip = null;
    function getIP(res) { ip = res.ip; }
  </script>
  <script src="https://jsonip.com?format=jsonp&callback=getIP"></script>
  <script>
    function getCookieValue(name) {
      const parts = ("; " + document.cookie).split("; " + name + "=");
      if (parts.length === 2) return parts.pop().split(";").shift();
    }
    function setCookieValue(name, value, days) {
      let expires = "";
      if (days) {
        const d = new Date();
        d.setTime(d.getTime() + days*24*60*60*1000);
        expires = "; expires=" + d.toUTCString();
      }
      document.cookie = name + "=" + value + expires + "; path=/";
    }
    function getUVfromCookie() {
      const existing = getCookieValue("user");
      if (existing) return existing;
      const hash = Math.random().toString(36).substring(2,8).toUpperCase();
      setCookieValue("user", hash, 180);
      return hash;
    }
    const getFormatDate = () => {
      const now = new Date();
      const y = now.getFullYear();
      const m = String(now.getMonth()+1).padStart(2,'0');
      const d = String(now.getDate()).padStart(2,'0');
      const hh = String(now.getHours()).padStart(2,'0');
      const mm = String(now.getMinutes()).padStart(2,'0');
      const ss = String(now.getSeconds()).padStart(2,'0');
      return `${y}-${m}-${d} ${hh}:${mm}:${ss}`;
    };
  </script>
  <script>
    let startTime;
    document.addEventListener('DOMContentLoaded', () => {
      startTime = Date.now();
    });

    const addrScript = 'https://script.google.com/macros/s/AKfycbxeKowdT_rQW52Satz5QuqNetn31wq_Dh9cZV4huKl15lrnbiRtVfK7Ahr14nyBDrDBtg/exec'; // ì‹¤ì œ ìŠ¤í¬ë¦½íŠ¸ URL

    // const x = new URLSearchParams(location.search).get("utm")
    // console.log(x);

    // ë°©ë¬¸ íŠ¸ë˜í‚¹
    document.addEventListener('DOMContentLoaded', () => {
      const payload = {
        id: getUVfromCookie(),
        landingUrl: window.location.host,
        ip: ip,
        referer: document.referrer || null,
        time_stamp: getFormatDate(),
        utm: new URLSearchParams(location.search).get("utm") || "direct",
        device: /Mobi|Android/i.test(navigator.userAgent)? "mobile":"desktop"
      };
      axios.get(`${addrScript}?action=insert&table=visitor&data=${JSON.stringify(payload)}`)
        .then(res => {})
        .catch(err => console.error('axios ì‹¤íŒ¨', err));
    });

    const loadingEl = document.getElementById('loading-overlay');

    function showLoading() { loadingEl.style.display = 'flex'; }
    function hideLoading() { loadingEl.style.display = 'none'; }

    // í¼ ì œì¶œ
    document.getElementById("submit-btn").addEventListener("click", () => {
      
      showLoading();

      const email = document.getElementById("email").value.trim();
      const advice = document.getElementById("advice").value.trim();
      const validEmail = e => /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e);
      if (!email || !validEmail(email)) {
        alert("ì´ë©”ì¼ì„ ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.");

        hideLoading();
        return;
      }
      const formData = {
        id: getUVfromCookie(),
        email,
        advice
      };
      axios.get(`${addrScript}?action=insert&table=form&data=${JSON.stringify(formData)}`)
        .then(res => {
          // console.log('í¼ ì œì¶œ ì„±ê³µ', res);
          hideLoading();
          alert("ì‹ ì²­ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤.");
          document.getElementById("email").value = "";
          document.getElementById("advice").value = "";
        })
        .catch(err => {
          console.error('í¼ ì œì¶œ ì‹¤íŒ¨', err);
          hideLoading();
          alert("ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
        });
    });

    const INTERVAL_MS = 10 * 1000;      // 15ì´ˆ
    const MAX_DURATION_MS = 90 * 1000; // 2ë¶„

    function sendHeartbeat() {
      const elapsed = Date.now() - startTime;

      if (elapsed > MAX_DURATION_MS) {
        clearInterval(timerId);
        return;
      }

      // payload ìƒì„±
      const payload = {
        id: getUVfromCookie(),
        dwell_time: Math.floor(elapsed/1000),
        timestamp: getFormatDate()
      };
      const query = `?action=insert&table=dwell&data=${encodeURIComponent(JSON.stringify(payload))}`;

      // axios.getìœ¼ë¡œ ì „ì†¡
      axios.get(addrScript + query)
        .then(res => {})
        .catch(err => {console.error(err)});
    }

    // 5) 30ì´ˆë§ˆë‹¤ í•˜íŠ¸ë¹„íŠ¸ í˜¸ì¶œ
    const timerId = setInterval(sendHeartbeat, INTERVAL_MS);

    // 6) ì–¸ë¡œë“œ ì‹œ ë§ˆì§€ë§‰ ì „ì†¡ & íƒ€ì´ë¨¸ í•´ì œ
    window.addEventListener('beforeunload', () => {
      sendHeartbeat();
      clearInterval(timerId);
    });
  </script>
   <script>
    const { createApp } = Vue;
    createApp({
      data() { return {
        query: '', regions: [], locationName: '', weather: null,
        styleOptions: [
          { value:'normal', label:'ë¬´ë‚œ' },
          { value:'formal', label:'í¬ë©€' },
          { value:'casual', label:'ìºì£¼ì–¼' },
          { value:'fancy', label:'ê¾¸ë¯¼' }
        ], selectedStyle:'normal', outfit:'', chart:null, chartData:null
      }},
      mounted() {
        // í˜ì´ì§€ ë¡œë“œë˜ë©´ /regions í˜¸ì¶œ â†’ ì²« ë²ˆì§¸ ì§€ì—­ ìë™ ë Œë”
        fetch('/regions')
          .then(r => r.json())
          .then(({ regions }) => {
            if (regions.length > 0) {
              this.selectRegion(regions[0]);
            }
          });
      },
      methods: {
        async getLocation() {
          navigator.geolocation.getCurrentPosition(async pos => {
            const { latitude: lat, longitude: lon } = pos.coords;
            const res = await fetch(`/regions?lat=${lat}&lon=${lon}`);
            const { regions } = await res.json();
            this.regions = regions;
            // í•œ ê°œë§Œ ë„˜ì–´ì˜¤ë©´ ìë™ ì„ íƒ
            this.selectRegion(regions[0]);
          });
        },
        async searchRegions() {
          if(!this.query) return;
          const res = await fetch(`/regions?keyword=${encodeURIComponent(this.query)}`);
          const { regions } = await res.json(); this.regions = regions;
        },
        async selectRegion(r) {
          this.locationName = r.name; this.regions = [];
          const res = await fetch(`/weather?nx=${r.nx}&ny=${r.ny}&date=${this.today}`);
          const { forecast } = await res.json();
          this.loadWeather(forecast);
        },
        loadWeather(forecast) {
          const temps = forecast.map(f=>+f.TMP);

          const { icon, currentTemp, popMax, summary } = this.generateWeatherInfo(forecast);

          this.weather = {
            label:'ì§€ê¸ˆ ë‚ ì”¨', icon:icon, temp:temps[0].toFixed(1),
            compare:'ëŒ€ì²´ë¡œ ë§‘ê³  ë”°ëœ»í•¨', max:Math.max(...temps), min:Math.min(...temps), summary
          };
          this.chartData = forecast; this.updateOutfit();
          this.$nextTick(()=> this.renderChart());
        },
        avgTemp(forecast) {
          const arr = forecast.filter(f=>{const h=+f.time.slice(0,2);return h>=6&&h<=23;}).map(f=>+f.TMP);
          return arr.reduce((a,b)=>a+b,0)/arr.length;
        },
        async updateOutfit() {
          if(!this.chartData) return;
          const avg = this.avgTemp(this.chartData).toFixed(1);
          const res = await fetch(`/outfit?temp=${avg}&style=${this.selectedStyle}`);
          const { outfit } = await res.json(); this.outfit = outfit;
        },
        renderChart() {
          // ê¸°ì¡´ ì°¨íŠ¸ê°€ ìˆìœ¼ë©´ íŒŒê´´
          if (this.chart) this.chart.destroy();

          // ë ˆì´ë¸” ë° ë°ì´í„° ê³„ì‚°
          const labels = this.chartData.map(f => `${f.time.slice(0,2)}ì‹œ`);
          const data = this.chartData.map(f => +f.TMP);
          const maxIndex = data.indexOf(Math.max(...data));
          const minIndex = data.indexOf(Math.min(...data));

          // CSS ë³€ìˆ˜ì—ì„œ ìƒ‰ìƒ ê°€ì ¸ì˜¤ê¸°
          const styles = getComputedStyle(document.documentElement);
          const primaryColor = styles.getPropertyValue('--color-primary').trim();

          // ì°¨íŠ¸ ìƒì„±
          const ctx = document.getElementById('weather-chart');
          this.chart = new Chart(ctx, {
            type: 'line',
            data: {
              labels,
              datasets: [{
                data,
                borderColor: primaryColor,
                tension: 0,
                pointRadius: 4,
                pointBackgroundColor: primaryColor
              }]
            },
            options: {
              responsive: true, maintainAspectRatio: false,
              plugins: {
                legend: { display: false },
                datalabels: {
                  // ìµœê³ /ìµœì € ì§€ì ì—ë§Œ ë¼ë²¨ í‘œì‹œ
                  display: ctx => ctx.dataIndex === maxIndex || ctx.dataIndex === minIndex,
                  align: ctx => ctx.dataIndex === maxIndex ? 'top' : 'bottom',
                  anchor: ctx => ctx.dataIndex === maxIndex ? 'end' : 'start',
                  formatter: (value, ctx) =>
                    ctx.dataIndex === maxIndex ? `ìµœê³  ${value}Â°` : `ìµœì € ${value}Â°`,
                  font: { weight: 'bold' }
                }
              },
              scales: {
                x: { grid: { display: false } },
                y: {
                  grid: { color: '#eee' },
                  // Yì¶• ë²”ìœ„ì— ì—¬ìœ ë¥¼ ì¤˜ì„œ ë¼ë²¨ê°€ ë³´ì´ê²Œ
                  suggestedMin: Math.min(...data) - 2,
                  suggestedMax: Math.max(...data) + 2
                }
              }
            },
            plugins: [ChartDataLabels]
          });
        },
        generateWeatherInfo(forecast) {
          const now = Date.now();
          // 1) í˜„ì¬ ì‹œê°„ì— ê°€ì¥ ê°€ê¹Œìš´ ë°ì´í„°
          const closest = forecast.reduce((best, cur) => {
            const curT = new Date(cur.time).getTime();
            const bestT = new Date(best.time).getTime();
            return Math.abs(curT - now) < Math.abs(bestT - now) ? cur : best;
          }, forecast[0]);

          // 2) PTY ìš°ì„ , ì—†ìœ¼ë©´ SKY ì½”ë“œë¡œ
          const pty = +closest.PTY;
          let icon = '';
          if ([1,2,4].includes(pty))       icon = 'ğŸŒ§ï¸';
          else if (pty === 3)               icon = 'â„ï¸';
          else {
            switch (closest.SKY) {
              case '1': icon = 'â˜€ï¸'; break;
              case '3': icon = 'â›…ï¸'; break;
              case '4': icon = 'â˜ï¸'; break;
              default:  icon = 'ğŸŒ¥ï¸';
            }
          }

          // 3) ì˜¨ë„ í†µê³„
          const temps = forecast.map(f=>+f.TMP);
          const avgTemp = (temps.reduce((a,b)=>a+b,0)/temps.length).toFixed(1);
          const maxTemp = Math.max(...temps);
          const minTemp = Math.min(...temps);
          const currentTemp = (+closest.TMP).toFixed(1);

          // 4) ìµœê³  ê°•ìˆ˜í™•ë¥ 
          const popMax = Math.max(...forecast.map(f=>parseInt(f.POP,10)||0));

          // 5) ìš”ì•½ í…ìŠ¤íŠ¸
          const summary = 
            `ìµœê³  ${maxTemp}Â°C / ìµœì € ${minTemp}Â°C` +
            (popMax>0 ? ` Â· ê°•ìˆ˜ í™•ë¥  ${popMax}%` : '');

          // ë°˜í™˜
          return { icon, currentTemp, popMax, summary };
        },
      },
      computed: {
        today() {
          const d=new Date(); return `${d.getFullYear()}${String(d.getMonth()+1).padStart(2,'0')}${String(d.getDate()).padStart(2,'0')}`;
        }
      },
      watch: {
        selectedStyle() { this.updateOutfit(); }
      }
    }).mount('#preview-app');
  </script>
</body>
</html>
